<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>Shopee ç®¡ç†åå° - ç«¯å£5050å„ªåŒ–ç‰ˆ</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, Arial; margin: 16px; background:#f7f7f7; color:#222; }
    header { display:flex; flex-wrap:wrap; align-items:center; gap:12px; margin-bottom:16px; }
    header h1 { margin:0; font-size:20px; }
    .stats { font-size:14px; color:#555; }
    .toolbar { display:flex; gap:8px; flex-wrap:wrap; }
    .card { background:#fff; border:1px solid #ddd; border-radius:8px; padding:12px; margin-bottom:16px; }
    .grid { overflow-x:auto; }
    table { width:100%; border-collapse:collapse; }
    th, td { border-bottom:1px solid #eee; padding:8px; text-align:left; font-size:14px; }
    th { background:#fafafa; }
    button { padding:6px 10px; border:1px solid #ccc; border-radius:6px; background:#fff; cursor:pointer; }
    button.primary { background:#0b74de; color:#fff; border-color:#0b74de; }
    button.warn { background:#b00020; color:#fff; border-color:#b00020; }
    button.success { background:#28a745; color:#fff; border-color:#28a745; }
    input, select { padding:6px 8px; border:1px solid #ccc; border-radius:6px; font-size:14px; width:100%; }
    form .row { display:flex; gap:8px; flex-wrap:wrap; margin-top:8px; }
    form .row > * { flex:1 1 160px; }
    .duplicate-warning { background:#fff3cd; border:1px solid #ffeaa7; border-radius:4px; padding:8px; margin:8px 0; font-size:13px; }
    .error-input { border-color:#dc3545 !important; background-color:#f8d7da; }
    .validation-info { font-size:12px; color:#666; margin-top:4px; }
    .status-badge { padding:2px 6px; border-radius:10px; font-size:11px; font-weight:500; }
    .status-active { background:#d4edda; color:#155724; }
    .status-inactive { background:#f8d7da; color:#721c24; }
    .search-box { margin-bottom:12px; padding:6px 8px; border:1px solid #ccc; border-radius:6px; width:200px; }
    .filter-bar { display:flex; gap:8px; margin-bottom:12px; flex-wrap:wrap; }
    .link-cell { max-width:200px; overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
    .modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); z-index:1000; }
    .modal-content { position:absolute; top:50%; left:50%; transform:translate(-50%, -50%); background:white; padding:20px; border-radius:8px; width:90%; max-width:500px; }
    .modal-buttons { display:flex; gap:8px; justify-content:flex-end; margin-top:16px; }
    .connection-status { display:inline-block; width:12px; height:12px; border-radius:50%; margin-right:6px; }
    .connected { background:#28a745; }
    .disconnected { background:#dc3545; }
    .checking { background:#ffc107; }
    .api-status { font-size:12px; color:#666; margin-left:10px; }
    .server-actions { display:flex; gap:8px; margin-top:10px; }
    .download-btn { background:#17a2b8; color:white; border:none; padding:4px 8px; border-radius:4px; font-size:12px; cursor:pointer; }
  </style>
</head>
<body>
  <header>
    <h1>ğŸ›ï¸ Shopee ç®¡ç†åå° - ç«¯å£5050å°ˆç”¨</h1>
    <div class="stats">
      <span class="connection-status connected"></span>
      å·²é€£æ¥åˆ°: <strong>http://127.0.0.1:5050</strong>
      <span class="api-status">APIæœå‹™å™¨é‹è¡Œä¸­</span>
    </div>
    <div class="toolbar">
      <button id="refreshBtn">ğŸ”„ åˆ·æ–°æ•¸æ“š</button>
      <button id="saveLocalBtn" class="primary">ğŸ’¾ ä¿å­˜åˆ°æœ¬åœ°</button>
      <button id="exportBtn" class="success">ğŸ“¤ å°å‡ºJSON</button>
      <button id="apiTestBtn">ğŸ§ª æ¸¬è©¦API</button>
    </div>
  </header>

  <div class="card">
    <h3>ğŸ“Š æœå‹™å™¨ä¿¡æ¯</h3>
    <div class="server-actions">
      <button onclick="window.open('http://127.0.0.1:5050/js/shopee_list.json', '_blank')">ğŸ”— æŸ¥çœ‹åŸå§‹JSON</button>
      <button onclick="window.open('http://127.0.0.1:5050/shopee.html', '_blank')">ğŸ›ï¸ æ‰“é–‹Shopeeå‰å°</button>
      <button onclick="window.open('http://127.0.0.1:5050/', '_blank')">ğŸ  æ‰“é–‹æœå‹™å™¨æ ¹ç›®éŒ„</button>
    </div>
  </div>

  <section class="card">
    <h2 style="margin:0 0 8px;">â• æ·»åŠ æ–°äº§å“</h2>
    <form id="addForm">
      <div class="row">
        <div>
          <input name="name" placeholder="äº§å“åç§° *" required />
        </div>
        <div>
          <input name="price" type="number" step="0.01" placeholder="ä»·æ ¼ (RM) *" required />
        </div>
        <div>
          <input name="stock" type="number" placeholder="åº“å­˜æ•°é‡ *" required />
        </div>
        <div>
          <input name="image" placeholder="å›¾ç‰‡æ–‡ä»¶å" />
          <div class="validation-info">å¦‚: sh-61_1112.png</div>
        </div>
        <div>
          <input name="link" placeholder="Shopeeå•†å“é“¾æ¥" />
        </div>
        <div>
          <select name="category" required>
            <option value="">é€‰æ‹©åˆ†ç±» *</option>
            <option value="health">ä¿å¥å…»ç”Ÿ</option>
            <option value="home">å®¶å±…ç”Ÿæ´»</option>
            <option value="electronic">ç”µå­äº§å“</option>
            <option value="book">å›¾ä¹¦æ–‡å…·</option>
          </select>
        </div>
      </div>
      <div class="row">
        <button type="submit" class="primary">âœ… æ·»åŠ äº§å“</button>
        <button type="button" onclick="clearForm()">ğŸ—‘ï¸ æ¸…ç©ºè¡¨å•</button>
      </div>
    </form>
  </section>

  <section class="card">
    <div class="filter-bar">
      <input type="text" id="searchInput" placeholder="ğŸ” æœç´¢äº§å“åç§°..." class="search-box" />
      <select id="statusFilter">
        <option value="all">æ‰€æœ‰çŠ¶æ€</option>
        <option value="active">ä»…ä¸Šæ¶</option>
        <option value="inactive">ä»…ä¸‹æ¶</option>
      </select>
      <select id="categoryFilter">
        <option value="all">æ‰€æœ‰åˆ†ç±»</option>
        <option value="health">ä¿å¥å…»ç”Ÿ</option>
        <option value="home">å®¶å±…ç”Ÿæ´»</option>
        <option value="electronic">ç”µå­äº§å“</option>
        <option value="book">å›¾ä¹¦æ–‡å…·</option>
      </select>
    </div>
    
    <div class="grid">
      <table id="productTable">
        <thead>
          <tr>
            <th>ID</th>
            <th>åç§°</th>
            <th>ä»·æ ¼</th>
            <th>åº“å­˜</th>
            <th>çŠ¶æ€</th>
            <th>åˆ†ç±»</th>
            <th>å›¾ç‰‡</th>
            <th>Shopeeé“¾æ¥</th>
            <th>æ“ä½œ</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </section>

  <!-- ç¼–è¾‘äº§å“æ¨¡æ€æ¡† -->
  <div id="editModal" class="modal">
    <div class="modal-content">
      <h3>ç¼–è¾‘äº§å“</h3>
      <form id="editForm">
        <input type="hidden" id="editId" name="id">
        <div class="row">
          <div>
            <label>äº§å“åç§° *</label>
            <input type="text" id="editName" name="name" required>
          </div>
          <div>
            <label>ä»·æ ¼ (RM) *</label>
            <input type="number" step="0.01" id="editPrice" name="price" required>
          </div>
          <div>
            <label>åº“å­˜æ•°é‡ *</label>
            <input type="number" id="editStock" name="stock" required>
          </div>
        </div>
        <div class="row">
          <div>
            <label>å›¾ç‰‡æ–‡ä»¶å</label>
            <input type="text" id="editImage" name="image">
          </div>
          <div>
            <label>Shopeeå•†å“é“¾æ¥</label>
            <input type="text" id="editLink" name="link">
          </div>
          <div>
            <label>åˆ†ç±» *</label>
            <select id="editCategory" name="category" required>
              <option value="health">ä¿å¥å…»ç”Ÿ</option>
              <option value="home">å®¶å±…ç”Ÿæ´»</option>
              <option value="electronic">ç”µå­äº§å“</option>
              <option value="book">å›¾ä¹¦æ–‡å…·</option>
            </select>
          </div>
        </div>
        <div class="modal-buttons">
          <button type="button" onclick="closeEditModal()">å–æ¶ˆ</button>
          <button type="submit" class="primary">ä¿å­˜æ›´æ”¹</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    // =============================================
    // é…ç½®
    // =============================================
    const SERVER_URL = 'http://127.0.0.1:5050';
    const JSON_URL = `${SERVER_URL}/js/shopee_list.json`;
    
    let allProducts = [];

    // =============================================
    // æ•¸æ“šåŠ è¼‰
    // =============================================
    async function loadData() {
      try {
        console.log(`ğŸ“¥ å¾ ${JSON_URL} åŠ è¼‰æ•¸æ“š...`);
        
        const response = await fetch(JSON_URL);
        if (!response.ok) {
          throw new Error(`HTTPéŒ¯èª¤: ${response.status}`);
        }
        
        const data = await response.json();
        
        if (!data.products || !Array.isArray(data.products)) {
          throw new Error('JSONæ ¼å¼ä¸æ­£ç¢º');
        }
        
        allProducts = data.products;
        console.log(`âœ… æˆåŠŸåŠ è¼‰ ${allProducts.length} å€‹ç”¢å“`);
        
        updateDisplay();
        
      } catch (error) {
        console.error('âŒ åŠ è¼‰å¤±æ•—:', error);
        alert(`åŠ è¼‰æ•¸æ“šå¤±æ•—:\n${error.message}\n\nè«‹ç¢ºä¿æœå‹™å™¨æ­£åœ¨é‹è¡Œ: ${SERVER_URL}`);
      }
    }

    // =============================================
    // æ•¸æ“šé¡¯ç¤º
    // =============================================
    function updateDisplay() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      const statusFilter = document.getElementById('statusFilter').value;
      const categoryFilter = document.getElementById('categoryFilter').value;

      const filteredProducts = allProducts.filter(p => {
        const matchesSearch = p.name.toLowerCase().includes(searchTerm);
        const matchesStatus = statusFilter === 'all' || p.status === statusFilter;
        const matchesCategory = categoryFilter === 'all' || p.category === categoryFilter;
        return matchesSearch && matchesStatus && matchesCategory;
      });

      renderTable(filteredProducts);
    }

    function renderTable(products) {
      const tbody = document.querySelector("#productTable tbody");
      
      if (products.length === 0) {
        tbody.innerHTML = `
          <tr>
            <td colspan="9" style="text-align:center; padding:20px; color:#6c757d;">
              æ²’æœ‰æ‰¾åˆ°åŒ¹é…çš„ç”¢å“
            </td>
          </tr>
        `;
        return;
      }
      
      let html = '';
      
      products.forEach(p => {
        const categoryName = getCategoryName(p.category);
        const statusText = p.status === 'active' ? 'ä¸Šæ¶' : 'ä¸‹æ¶';
        const statusClass = p.status === 'active' ? 'status-active' : 'status-inactive';
        
        html += `
          <tr>
            <td>${p.id}</td>
            <td><strong>${p.name}</strong></td>
            <td>RM ${Number(p.price).toFixed(2)}</td>
            <td>${p.stock}</td>
            <td><span class="status-badge ${statusClass}">${statusText}</span></td>
            <td>${categoryName}</td>
            <td>${p.image ? `<small>${p.image}</small>` : 'â€”'}</td>
            <td class="link-cell">
              ${p.link ? `
                <a href="${p.link}" target="_blank" title="${p.link}">
                  æŸ¥çœ‹
                </a>
                <button class="download-btn" onclick="copyToClipboard('${p.link}')" title="è¤‡è£½éˆæ¥">
                  ğŸ“‹
                </button>
              ` : 'â€”'}
            </td>
            <td>
              <button onclick="openEditModal(${p.id})" title="ç·¨è¼¯">âœï¸</button>
              <button class="${p.status === 'active' ? 'warn' : 'success'}" 
                      onclick="toggleProductStatus(${p.id})"
                      title="${p.status === 'active' ? 'ä¸‹æ¶' : 'ä¸Šæ¶'}">
                ${p.status === 'active' ? 'â¬‡ï¸' : 'â¬†ï¸'}
              </button>
              <button class="warn" onclick="deleteProduct(${p.id})" title="åˆªé™¤">ğŸ—‘ï¸</button>
            </td>
          </tr>
        `;
      });
      
      tbody.innerHTML = html;
    }

    function getCategoryName(category) {
      const map = {
        'health': 'ä¿å¥å…»ç”Ÿ',
        'home': 'å®¶å±…ç”Ÿæ´»', 
        'electronic': 'ç”µå­äº§å“',
        'book': 'å›¾ä¹¦æ–‡å…·'
      };
      return map[category] || category || 'å…¶ä»–';
    }

    // =============================================
    // æ•¸æ“šä¿å­˜ï¼ˆæœ¬åœ°ä¿å­˜æ–¹æ¡ˆï¼‰
    // =============================================
    function saveToLocal() {
      const dataToSave = {
        products: allProducts,
        totalProducts: allProducts.length,
        lastUpdated: new Date().toISOString()
      };
      
      // å‰µå»ºä¸‹è¼‰éˆæ¥
      const blob = new Blob([JSON.stringify(dataToSave, null, 2)], { type: 'application/json' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = `shopee_data_${new Date().toISOString().slice(0,10)}.json`;
      
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
      
      alert(`âœ… å·²å°å‡º ${allProducts.length} å€‹ç”¢å“\n\nè«‹å°‡ä¸‹è¼‰çš„æ–‡ä»¶è¤‡è£½åˆ°:\n/storage/emulated/0/bursasearch/myx_shop/js/shopee_list.json\n\nç„¶å¾Œé‡å•Ÿæœå‹™å™¨ä½¿æ›´æ”¹ç”Ÿæ•ˆã€‚`);
    }

    function exportJSON() {
      const dataToSave = {
        products: allProducts,
        totalProducts: allProducts.length,
        lastUpdated: new Date().toISOString()
      };
      
      const jsonStr = JSON.stringify(dataToSave, null, 2);
      const textarea = document.createElement('textarea');
      textarea.value = jsonStr;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      
      alert(`âœ… å·²è¤‡è£½ ${allProducts.length} å€‹ç”¢å“çš„JSONæ•¸æ“šåˆ°å‰ªè²¼æ¿\n\næ‚¨å¯ä»¥å°‡å…§å®¹ä¿å­˜åˆ°æ–‡ä»¶ä¸­ã€‚`);
    }

    // =============================================
    // ç”¢å“æ“ä½œ
    // =============================================
    document.getElementById("addForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const form = e.target;
      
      try {
        // ç”Ÿæˆæ–°ID
        const newId = allProducts.length > 0 ? Math.max(...allProducts.map(p => p.id)) + 1 : 1;
        
        const newProduct = {
          id: newId,
          name: form.name.value.trim(),
          price: parseFloat(form.price.value),
          stock: parseInt(form.stock.value),
          image: form.image.value.trim() || `sh-${newId}.png`,
          link: form.link.value.trim(),
          category: form.category.value || 'health',
          status: "active",
          sales: 0
        };

        // æª¢æŸ¥é‡è¤‡
        const nameDuplicate = allProducts.find(p => 
          p.name.toLowerCase() === newProduct.name.toLowerCase()
        );
        
        if (nameDuplicate) {
          if (!confirm(`ç”¢å“åç¨±é‡è¤‡: "${newProduct.name}" (ID: ${nameDuplicate.id})\n\nä»ç„¶è¦æ·»åŠ å—ï¼Ÿ`)) {
            return;
          }
        }

        // æ·»åŠ åˆ°æœ¬åœ°åˆ—è¡¨
        allProducts.push(newProduct);
        form.reset();
        
        updateDisplay();
        
        alert(`âœ… ç”¢å“ "${newProduct.name}" å·²æ·»åŠ åˆ°æœ¬åœ°åˆ—è¡¨\n\nè«‹é»æ“Šã€Œä¿å­˜åˆ°æœ¬åœ°ã€æŒ‰éˆ•å°å‡ºæ•¸æ“šï¼Œç„¶å¾Œæ‰‹å‹•æ›´æ–°æœå‹™å™¨æ–‡ä»¶ã€‚`);
        
      } catch (error) {
        alert("éŒ¯èª¤: " + error.message);
      }
    });

    function openEditModal(id) {
      const product = allProducts.find(p => p.id === id);
      if (!product) return;

      document.getElementById('editId').value = product.id;
      document.getElementById('editName').value = product.name;
      document.getElementById('editPrice').value = product.price;
      document.getElementById('editStock').value = product.stock;
      document.getElementById('editImage').value = product.image || '';
      document.getElementById('editLink').value = product.link || '';
      document.getElementById('editCategory').value = product.category || 'health';

      document.getElementById('editModal').style.display = 'block';
    }

    function closeEditModal() {
      document.getElementById('editModal').style.display = 'none';
    }

    document.getElementById('editForm').addEventListener('submit', (e) => {
      e.preventDefault();
      
      const id = parseInt(document.getElementById('editId').value);
      const updates = {
        name: document.getElementById('editName').value.trim(),
        price: parseFloat(document.getElementById('editPrice').value),
        stock: parseInt(document.getElementById('editStock').value),
        image: document.getElementById('editImage').value.trim(),
        link: document.getElementById('editLink').value.trim(),
        category: document.getElementById('editCategory').value
      };

      // æ›´æ–°æœ¬åœ°åˆ—è¡¨
      const index = allProducts.findIndex(p => p.id === id);
      if (index !== -1) {
        allProducts[index] = { ...allProducts[index], ...updates };
        updateDisplay();
        closeEditModal();
        alert('âœ… ç”¢å“å·²æ›´æ–°ï¼ˆæœ¬åœ°ä¿®æ”¹ï¼‰\n\nè«‹è¨˜å¾—ä¿å­˜åˆ°æ–‡ä»¶ã€‚');
      }
    });

    function toggleProductStatus(id) {
      const product = allProducts.find(p => p.id === id);
      if (!product) return;
      
      const newStatus = product.status === 'active' ? 'inactive' : 'active';
      const confirmMessage = newStatus === 'inactive' ? 
        'ç¢ºå®šè¦ä¸‹æ¶é€™å€‹ç”¢å“å—ï¼Ÿ' : 'ç¢ºå®šè¦é‡æ–°ä¸Šæ¶é€™å€‹ç”¢å“å—ï¼Ÿ';
      
      if (!confirm(confirmMessage)) return;
      
      product.status = newStatus;
      updateDisplay();
      
      alert(`ç”¢å“å·²${newStatus === 'inactive' ? 'ä¸‹æ¶' : 'ä¸Šæ¶'}ï¼ˆæœ¬åœ°ä¿®æ”¹ï¼‰\n\nè«‹è¨˜å¾—ä¿å­˜åˆ°æ–‡ä»¶ã€‚`);
    }

    function deleteProduct(id) {
      const product = allProducts.find(p => p.id === id);
      if (!product) return;

      if (!confirm(`ç¢ºå®šè¦åˆªé™¤ç”¢å“å—ï¼Ÿ\n\nID: ${product.id}\nåç¨±: ${product.name}`)) return;

      allProducts = allProducts.filter(p => p.id !== id);
      updateDisplay();
      
      alert('âœ… ç”¢å“å·²åˆªé™¤ï¼ˆæœ¬åœ°ä¿®æ”¹ï¼‰\n\nè«‹è¨˜å¾—ä¿å­˜åˆ°æ–‡ä»¶ã€‚');
    }

    function clearForm() {
      document.getElementById('addForm').reset();
    }

    // =============================================
    // å·¥å…·å‡½æ•¸
    // =============================================
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(() => {
        alert('âœ… éˆæ¥å·²è¤‡è£½åˆ°å‰ªè²¼æ¿');
      }).catch(err => {
        console.error('è¤‡è£½å¤±æ•—:', err);
      });
    }

    async function testAPI() {
      try {
        alert(`ğŸ§ª æ¸¬è©¦APIé€£æ¥...\n\nURL: ${SERVER_URL}`);
        
        // æ¸¬è©¦æœå‹™å™¨æ ¹ç›®éŒ„
        const rootResponse = await fetch(SERVER_URL);
        console.log('æ ¹ç›®éŒ„éŸ¿æ‡‰:', rootResponse.status);
        
        // æ¸¬è©¦JSONæ–‡ä»¶
        const jsonResponse = await fetch(JSON_URL);
        console.log('JSONæ–‡ä»¶éŸ¿æ‡‰:', jsonResponse.status);
        
        let message = `APIæ¸¬è©¦çµæœ:\n\n`;
        message += `1. æœå‹™å™¨æ ¹ç›®éŒ„: ${rootResponse.ok ? 'âœ… æ­£å¸¸' : 'âŒ ç•°å¸¸'}\n`;
        message += `2. JSONæ–‡ä»¶: ${jsonResponse.ok ? 'âœ… æ­£å¸¸' : 'âŒ ç•°å¸¸'}\n`;
        message += `\nç•¶å‰ç”¢å“æ•¸: ${allProducts.length}\n`;
        message += `æœå‹™å™¨URL: ${SERVER_URL}`;
        
        alert(message);
        
      } catch (error) {
        alert(`âŒ APIæ¸¬è©¦å¤±æ•—:\n${error.message}\n\nè«‹ç¢ºä¿æœå‹™å™¨æ­£åœ¨é‹è¡Œã€‚`);
      }
    }

    // =============================================
    // äº‹ä»¶ç›£è½å™¨
    // =============================================
    document.getElementById("refreshBtn").addEventListener("click", loadData);
    document.getElementById("saveLocalBtn").addEventListener("click", saveToLocal);
    document.getElementById("exportBtn").addEventListener("click", exportJSON);
    document.getElementById("apiTestBtn").addEventListener("click", testAPI);
    
    document.getElementById("searchInput").addEventListener("input", updateDisplay);
    document.getElementById("statusFilter").addEventListener("change", updateDisplay);
    document.getElementById("categoryFilter").addEventListener("change", updateDisplay);

    // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
    document.getElementById('editModal').addEventListener('click', (e) => {
      if (e.target.id === 'editModal') {
        closeEditModal();
      }
    });

    // =============================================
    // åˆå§‹åŒ–
    // =============================================
    async function init() {
      console.log('ğŸš€ Shopeeç®¡ç†å¾Œå°åˆå§‹åŒ–...');
      console.log(`æœå‹™å™¨: ${SERVER_URL}`);
      console.log(`JSONæ–‡ä»¶: ${JSON_URL}`);
      
      // é¡¯ç¤ºæ­¡è¿ä¿¡æ¯
      alert(`æ­¡è¿ä½¿ç”¨Shopeeç®¡ç†å¾Œå°ï¼\n\né€£æ¥è‡³: ${SERVER_URL}\n\nè«‹æ³¨æ„ï¼šä¿®æ”¹æœƒå…ˆä¿å­˜åœ¨ç€è¦½å™¨ä¸­ï¼Œå®Œæˆå¾Œè«‹é»æ“Šã€Œä¿å­˜åˆ°æœ¬åœ°ã€å°å‡ºæ–‡ä»¶ã€‚`);
      
      // åŠ è¼‰æ•¸æ“š
      await loadData();
      
      console.log('âœ… åˆå§‹åŒ–å®Œæˆ');
    }

    // é é¢åŠ è¼‰å®Œæˆå¾Œåˆå§‹åŒ–
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>